<div class="row">
  <div class="col">
    <div class="row" *ngIf="showMsg">
      <div *ngIf="showSuccessMsg" class="alert alert-success" role="alert">
        Account added Successfully, <a href="/ob-sandbox/view-users" class="alert-link">View Users with Accounts</a>.
      </div>

    </div>
    <div *ngIf="showErrorMsg" class="alert alert-danger" role="alert">
      Account saving Failed , Error: {{errorMesage}}.
    </div>
  </div>
</div>

<app-card cardTitle="Transaction Details" *ngIf="!showMsg">
  <div class="row">
    <div class="col">
      <form style="width: 80%">
        <p class="h4 mb-4">Transaction Details</p>
        <div class="form-row">
          <div class="form-group col-md-4">
            <label for="inputaccountType">User</label>
            <select id="inputaccountType" name="usersdropDown" class="form-control"
                    (change)="onUserListChange($event)" [(ngModel)]="transaction.userId">
              <option *ngFor="let user of usersList" [value]="user.id">{{ user.userName }}</option>
            </select>
          </div>
          <div class="form-group col-md-4">
            <label for="inputaccountType">Account</label>
            <select id="inputaccountType" name="usersdropDown" class="form-control"
                    [(ngModel)]="transaction.AccountId">
              <option *ngFor="let account of accountList" [value]="account.AccountId">{{ account.AccountId }}
              </option>
            </select>
          </div>
        </div>

        <div class="form-row">

          <div class="form-group col-md-4">
            <label for="inputaccountType">Credit/Debit Indicator</label>
            <select id="inputaccountType" name="accountTypedropDown" class="form-control"
                    [(ngModel)]="transaction.CreditDebitIndicator">
              <option *ngFor="let lookup of creditDebitList" [value]="lookup.code">{{ lookup.code }}</option>
            </select>
          </div>
          <div class="form-group col-md-4">
            <label for="inputStatus">Status</label>
            <select id="inputStatus" name="statusdropDown" class="form-control" [(ngModel)]="transaction.Status">
              <option *ngFor="let lookup of statusList" [value]="lookup.code">{{ lookup.code }}</option>
            </select>
          </div>

          <div class="form-group col-md-4">
            <label for="inputStatus">Mutability</label>
            <select id="inputStatus" name="statusdropDown" class="form-control"
                    [(ngModel)]="transaction.Mutability">
              <option *ngFor="let lookup of mutabilityList" [value]="lookup.code">{{ lookup.code }}</option>
            </select>
          </div>

        </div>

        <div class="form-row">

          <div class="form-group col-md-6">
            <label for="inputStatus">AddressLine</label>
            <input class="form-control" type="text" id="AddressLineName" [(ngModel)]="transaction.AddressLine"
                   name="AddressLineName" />
          </div>
          <div class="form-group col-md-6">
            <label for="inputStatus">Transaction Information</label>
            <input class="form-control" type="text" id="TransactionInformationId" [(ngModel)]="transaction.TransactionInformation"
                   name="TransactionInformationName" />
          </div>


        </div>


        <div class="form-group">
          <label for="inputStatus">Exchange Rate</label>
          <table class="sbm-dt ui-table ui-widget ui-table-responsive ui-table-hoverable-rows" name="tablIdentification">
            <thead class="ui-table-thead">
            <tr>
              <th>Source Currency</th>
              <th>Target Currency</th>
              <th>Exchange Rate</th>
              <th>Quotation Date</th>
              <!-- <th>Action</th> -->
            </tr>
            </thead>
            <tbody class="ui-table-tbody">
            <tr>
              <td>
                <select id="srcCurrency" name="srcCurrencyName" class="form-control"
                        [(ngModel)]="currencyExchange.SourceCurrency">
                  <option *ngFor="let lookup of currencyList" [value]="lookup.code">{{ lookup.code }}
                  </option>
                </select>
              </td>
              <td>
                <select id="trgtCurrency" name="trgtCurrencyName" class="form-control"
                        [(ngModel)]="currencyExchange.TargetCurrency">
                  <option *ngFor="let lookup of currencyList" [value]="lookup.code">{{ lookup.code }}
                  </option>
                </select>
              </td>
              <td>
                <input class="form-control" type="number" min="0" id="newAttributeName"
                       [(ngModel)]="currencyExchange.ExchangeRate" name="newAttributeName" />
              </td>

              <td>
                <input type="date" class="form-control" value="{{currencyExchange.QuotationDate}}"
                       [(ngModel)]="currencyExchange.QuotationDate" name="newAttributePrice" />

              </td>

            </tr>
            </tbody>
          </table>

        </div>
        <div class="form-row">
          <div class="form-group" style="width: 40%">
            <label for="inputStatus">Bank Transaction Code</label>
            <table class="sbm-dt ui-table ui-widget ui-table-responsive ui-table-hoverable-rows" name="tabbankCode">
              <thead class="ui-table-thead">
              <tr>
                <th>Code</th>
                <th>Sub Code</th>
              </tr>
              </thead>
              <tbody class="ui-table-tbody">
              <tr>
                <td>
                  <input type="text" class="form-control" id="bankCode" [(ngModel)]="bancTranCode.Code"
                         name="bankCodeName" />
                </td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="bancTranCode.SubCode"
                         name="bankSubCodeName" />
                </td>
              </tr>
              </tbody>
            </table>
          </div>
          <div class="form-group" style="width: 5%"> </div>
          <div class="form-group" style="width: 50%">
            <label for="inputStatus">Merchant Details</label>
            <table class="sbm-dt ui-table ui-widget ui-table-responsive ui-table-hoverable-rows" name="tabbankCode">
              <thead class="ui-table-thead">
              <tr>
                <th>Merchant Name</th>
                <th>Merchant Category Code</th>
              </tr>
              </thead>
              <tbody class="ui-table-tbody">
              <tr>
                <td>
                  <input type="text" class="form-control" id="MerchantCategoryCode"
                         [(ngModel)]="merchantDetails.MerchantName" name="MerchantNameName" />
                </td>
                <td>
                  <input type="text" class="form-control"
                         [(ngModel)]="merchantDetails.MerchantCategoryCode"
                         name="MerchantCategoryCodeName" />
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group" style="width: 40%">
            <label for="inputStatus">Amount</label>
            <table class="sbm-dt ui-table ui-widget ui-table-responsive ui-table-hoverable-rows" name="tabbankCode">
              <thead class="ui-table-thead">
              <tr>
                <th>Amount</th>
                <th>Currency</th>
              </tr>
              </thead>
              <tbody class="ui-table-tbody">
              <tr>
                <td>
                  <input type="number" class="form-control" min="0" id="amt" [(ngModel)]="amount.Amount"
                         name="amtName" />
                </td>
                <td>
                  <select id="amtCurrency" name="amtCurrencyName" class="form-control"
                          [(ngModel)]="amount.Currency">
                    <option *ngFor="let lookup of currencyList" [value]="lookup.code">{{ lookup.code }}
                    </option>
                  </select>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
          <div class="form-group" style="width: 5%"> </div>
          <div class="form-group" style="width: 50%">
            <label for="inputStatus">Charge Amount</label>
            <table class="sbm-dt ui-table ui-widget ui-table-responsive ui-table-hoverable-rows" name="tabbankCode">
              <thead class="ui-table-thead">
              <tr>
                <th>Amount</th>
                <th>Currency</th>
              </tr>
              </thead>
              <tbody class="ui-table-tbody">
              <tr>
                <td>
                  <input type="number" min="0" class="form-control" id="chrgAmt"
                         [(ngModel)]="chargeAmount.Amount" name="chrgAmtName" />
                </td>
                <td>
                  <select id="chrgAmtCurrency" name="chrgAmtCurrencyName" class="form-control"
                          [(ngModel)]="chargeAmount.Currency">
                    <option *ngFor="let lookup of currencyList" [value]="lookup.code">{{ lookup.code }}
                    </option>
                  </select>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group" style="width: 70%">
            <label for="inputStatus">Balance</label>
            <table class="sbm-dt ui-table ui-widget ui-table-responsive ui-table-hoverable-rows" name="tabbankCode">
              <thead class="ui-table-thead">
              <tr>
                <th>Credit/Debit Indicator</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Currency</th>
              </tr>
              </thead>
              <tbody class="ui-table-tbody">
              <tr>
                <td>
                  <select id="balanceaccountType" name="balanceaccountTypedropDown" class="form-control"
                          [(ngModel)]="balance.CreditDebitIndicator">
                    <option *ngFor="let lookup of creditDebitList" [value]="lookup.code">{{ lookup.code }}</option>
                  </select>
                </td>
                <td>
                  <select id="balanceType" name="balanceTypedropDown" class="form-control"
                          [(ngModel)]="balance.Type">
                    <option *ngFor="let lookup of balanceTypeList" [value]="lookup.code">{{ lookup.code }}</option>
                  </select>
                </td>
                <td>
                  <input type="number" min="0" class="form-control" id="balanceAmt" [(ngModel)]="balanceAmount.Amount"
                         name="balanceAmtName" />
                </td>
                <td>
                  <select id="balanceAmtCurrency" name="balanceAmtCurrencyName" class="form-control"
                          [(ngModel)]="balanceAmount.Currency">
                    <option *ngFor="let lookup of currencyList" [value]="lookup.code">{{ lookup.code }}
                    </option>
                  </select>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>



        <!-- Save button -->
        <button class="btn btn-primary" (click)="saveTransaction()"> save Transaction</button>
      </form>
    </div>
  </div>
</app-card>
